<div class="container">
  <h3 class="text-end">ORGANIZATION: <%= current_user.organization.name.capitalize %></h3>
</div>

<div class="mt-3">
  <%= render @project %>
</div>

<div class="mt-3">
  <%= render 'artifacts/form', artifact: @artifact, project: @project %>
</div>

<div class="mt-3">
  <h2>Artifacts</h2>
    <% @project.artifacts.each do |artifact| %>
      <div class="mt-3">
        <%= link_to artifact.name, project_artifact_path(@project, artifact) %>
        <%= link_to("X", project_artifact_path(@project, artifact), class: "btn text-danger border border-danger", data: { turbo_method: :delete, confirm: "Are you sure?" }) %>
      </div>
    <% end %>
</div>

<div class="mt-3">
  <% if current_user.has_permission?(:manage_projects) && @project.users.include?(current_user) %>
    <%= link_to("Edit", edit_project_path(@project), class: "mt-1 btn btn-outline-warning") %>

    <% if @project.completed? %>
      <%= link_to("Reopen", reopen_project_path(@project), class: "mt-1 btn btn-outline-success", data: { turbo_method: :patch, confirm: "Are you sure?" }) %>
    <% else %>
      <%= link_to("Complete", complete_and_archive_project_path(@project), class: "mt-1 btn btn-outline-success", data: { turbo_method: :patch, confirm: "Are you sure?" }) %>
    <% end %>
    <%= link_to("Delete", project_path(@project), class: "mt-1 btn btn-outline-danger", data: { turbo_method: :delete, confirm: "Are you sure?" }) %>
  <% end %>
</div>

<div class="mb-4">
  <%= link_to("Back to Projects", projects_path, class: "mt-1 btn btn-outline-primary") %>
</div>
